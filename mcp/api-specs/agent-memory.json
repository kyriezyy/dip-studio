{
  "openapi": "3.0.2",
  "info": {
    "title": "AGENT-Memory服务 API",
    "version": "1.0.0",
    "description": "API to access DIP\n\n如有任何疑问，可到开发者社区提问：https://developers.aishu.cn\n"
  },
  "servers": [
    {
      "url": "https://{host}:{port}/api/",
      "description": "host: DIP服务器IP, port: 默认端口443",
      "variables": {
        "host": {
          "default": "host",
          "description": "DIP服务器IP"
        },
        "port": {
          "default": "443",
          "description": "https默认端口443"
        }
      }
    }
  ],
  "tags": [
    {
      "$ref": "../../../../common/common_headers.yaml#/common_header_tag"
    },
    {
      "name": "记忆构建&召回"
    },
    {
      "name": "记忆管理"
    },
    {
      "name": "自定义错误码汇总"
    },
    {
      "name": "相关文档",
      "description": "相关文档：\n- [confluence](https://confluence.aishu.cn/pages/viewpage.action?pageId=267740883)\n- [devops](https://devops.aishu.cn/AISHUDevOps/DIP/_workitems/edit/764795)\n"
    }
  ],
  "x-tagGroups": [
    {
      "name": "通用说明",
      "tags": [
        "公共Header说明"
      ]
    },
    {
      "name": "AGENT Memory",
      "tags": [
        "记忆管理"
      ]
    },
    {
      "name": "错误码",
      "tags": [
        "自定义错误码汇总"
      ]
    },
    {
      "name": "相关文档",
      "tags": [
        "相关文档"
      ]
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "健康检查",
        "tags": [
          "系统"
        ],
        "responses": {
          "200": {
            "description": "服务正常"
          }
        }
      }
    },
    "/api/agent-memory/v1/memory": {
      "get": {
        "summary": "记忆列表",
        "tags": [
          "记忆管理"
        ],
        "parameters": [
          {
            "$ref": "../schema/list_memory_req.yaml#/ListMemoryReqParams/parameters/user_id"
          },
          {
            "$ref": "../schema/list_memory_req.yaml#/ListMemoryReqParams/parameters/agent_id"
          },
          {
            "$ref": "../schema/list_memory_req.yaml#/ListMemoryReqParams/parameters/run_id"
          },
          {
            "$ref": "../schema/list_memory_req.yaml#/ListMemoryReqParams/parameters/limit"
          }
        ],
        "responses": {
          "200": {
            "description": "记忆列表",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "../schema/list_memory_resp.yaml#/ListMemoryResp"
                }
              }
            }
          },
          "400": {
            "$ref": "../components/components.yaml#/components/responses/400"
          },
          "500": {
            "$ref": "../components/components.yaml#/components/responses/500"
          }
        }
      }
    },
    "/api/agent-memory/v1/memory/{memory_id}": {
      "put": {
        "summary": "修改记忆",
        "tags": [
          "记忆管理"
        ],
        "parameters": [
          {
            "memory_id": null,
            "name": "memory_id",
            "in": "path",
            "schema": {
              "type": "string",
              "required": true
            },
            "description": "记忆ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "string",
                    "description": "记忆内容"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "更新成功"
          },
          "400": {
            "$ref": "../components/components.yaml#/components/responses/400"
          },
          "500": {
            "$ref": "../components/components.yaml#/components/responses/500"
          }
        }
      },
      "delete": {
        "summary": "删除记忆",
        "tags": [
          "记忆管理"
        ],
        "parameters": [
          {
            "memory_id": null,
            "name": "memory_id",
            "in": "path",
            "schema": {
              "type": "string",
              "required": true
            },
            "description": "记忆ID"
          }
        ],
        "responses": {
          "204": {
            "description": "删除成功"
          },
          "400": {
            "$ref": "../components/components.yaml#/components/responses/400"
          },
          "500": {
            "$ref": "../components/components.yaml#/components/responses/500"
          }
        }
      }
    },
    "/api/agent-memory/v1/memory/{memory_id}/history": {
      "get": {
        "summary": "获取记忆历史",
        "tags": [
          "记忆管理"
        ],
        "parameters": [
          {
            "memory_id": null,
            "name": "memory_id",
            "in": "path",
            "schema": {
              "type": "string",
              "description": "记忆ID"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "记忆历史",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "../schema/memory_history_resp.yaml#/MemoryHistoryResp"
                }
              }
            }
          },
          "400": {
            "$ref": "../components/components.yaml#/components/responses/400"
          },
          "500": {
            "$ref": "../components/components.yaml#/components/responses/500"
          }
        }
      }
    }
  },
  "security": [
    {
      "ApiKeyAuth": []
    }
  ]
}